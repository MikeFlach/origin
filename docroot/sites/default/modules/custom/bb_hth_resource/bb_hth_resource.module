<?php
// $Id$
require_once ( dirname(__FILE__) . '/bb_hth_settings.inc');
 
function bb_hth_resource_services_resources() {
  return array(
    // UID
    'bb-get-uid' => array(
      'operations' => array(
        'index' => array(
          'help' => 'generates a maxim uid',
          'file' => array('name' => 'bb_hth_uid_resource', 'type' => 'inc', 'module' => 'bb_hth_resource'),
          'callback' => '_bb_generate_uid',
          'access callback' =>  '_bb_hth_resource_access',
        )
      ),
    ),

    // VOTING 
    'bb-hth-vote' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'retrieves voting info for a given nid/day/uid combo',
          'file' => array('name' => 'bb_hth_voting_resource', 'type' => 'inc', 'module' => 'bb_hth_resource'),
          'callback' => '_bb_hth_resource_retreive',
          'access callback' =>  '_bb_hth_resource_access',
          'access arguments append' => TRUE,
          'args' => array(
            array(
              'name' => 'nid',
              'type' => 'int',
              'description' => 'The nid of the hth',
              'source' => array('path' => '0'),
              'optional' => FALSE,
            ),
            array(
              'name' => 'uid',
              'type' => 'int',
              'description' => 'the uid of the requester',
              'source' => array('param' => 'uid'),
              'optional' => FALSE,
            ),
          ),
        ),

        'create' => array(
          'help' => 'Creates a vote for a given nid/day',
          'file' => array('file' => 'inc', 'module' => 'bb_hth_voting_resource'),
          'callback' => '_bb_hth_resource_create',
          'access callback' => '_bb_hth_resource_access',
          'args' => array(
            array(
              'name' => 'data',
              'type' => 'array',
              'description' => 'The entity nid/user id',
              'source' => 'data',
              'optional' => FALSE,
            ),
          ),
        ),
      ),
    ),
      
    // STATES
    'state-list' => array(
      'operations' => array(
        'index' => array(
          'help' => 'retreives list of states',
          'file' => array('name' => 'bb_hth_lookup_resource', 'type' => 'inc', 'module' => 'bb_hth_resource'),
          'callback' => '_bb_hth_lookup_states_retreive',
          'access callback' =>  '_bb_hth_resource_access',
          'access arguments append' => FALSE,
        ),
      ),
    ),
      
    // YEARS
    'years' => array(
      'operations' => array(
        'index' => array(
          'help' => 'retreives list of active hth years',
          'file' => array('name' => 'bb_hth_lookup_resource', 'type' => 'inc', 'module' => 'bb_hth_resource'),
          'callback' => '_bb_hth_lookup_years_retreive',
          'access callback' =>  '_bb_hth_resource_access',
          'access arguments append' => FALSE,
        ),
      ),
    ),
      
     // STANDINGS
    'standings' => array(
      'operations' => array(
        'index' => array(
          'help' => 'retreives list of hth standings',
          'file' => array('name' => 'bb_hth_lookup_resource', 'type' => 'inc', 'module' => 'bb_hth_resource'),
          'callback' => '_bb_hth_lookup_standings_retreive',
          'access callback' =>  '_bb_hth_resource_access',
          'access arguments append' => FALSE,
        ),
      ),
    ),
      
      // HTH BY STATE
    'bb-hth-state' => array(
      'operations' => array(
        'index' => array(
          'help' => 'retrieves profiles by state',
          'file' => array('name' => 'bb_hth_state_resource', 'type' => 'inc', 'module' => 'bb_hth_resource'),
          'callback' => '_bb_hth_state_resource_retreive',
          'access callback' =>  '_bb_hth_resource_access',
          'access arguments append' => TRUE,
          'args' => array(
             array(
              'name' => 'year',
              'type' => 'int',
              'description' => 'hth year',
              'source' => array('path' => '0'),
              'optional' => FALSE,
            ),
            array(
              'name' => 'state',
              'type' => 'string',
              'description' => 'hth state',
              'source' => array('path' => '1'),
              'optional' => FALSE,
            ),
            array(
              'name' => 'page',
              'type' => 'int',
              'description' => 'page number',
              'source' => array('param' => 'page'),
              'default value' => '1',
              'optional' => TRUE,
            ),
            array(
              'name' => 'ipp',
              'type' => 'int',
              'description' => 'items per page',
              'source' => array('param' => 'ipp'),
              'default value' => '4',
              'optional' => TRUE,
            ),
            array(
              'name' => 'status',
              'type' => 'string',
              'description' => 'profiles to return',
              'source' => array('param' => 'status'),
              'optional' => TRUE,
              'default value' => null,
            ),
          ),
        ),
      ),
    ),
      
 // HTH PROFILE
    'bb-hth-profile' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'retrieves profile by nid',
          'file' => array('name' => 'bb_hth_profile_resource', 'type' => 'inc', 'module' => 'bb_hth_resource'),
          'callback' => '_bb_hth_profile_resource_retreive',
          'access callback' =>  '_bb_hth_resource_access',
          'access arguments append' => TRUE,
          'args' => array(
            array(
              'name' => 'nid',
              'type' => 'int',
              'description' => 'hth nid',
              'source' => array('path' => '0'),
              'optional' => FALSE,
            ),
            array(
              'name' => 'tab',
              'type' => 'string',
              'description' => 'originating tab',
              'source' => array('path' => '1'),
              'optional' => FALSE,
            ),
          ),
        ),
      ),
    ),
      
    // SEARCH
    'bb-hth' => array(
      'operations' => array(
        'index' => array(
          'help' => 'gets name/state/img/nid of hths',
          'file' => array('file' => 'inc', 'module' => 'bb_hth_resource'),
          'callback' => '_bb_hth_resource_retreive_hth',
          'access callback' =>  '_bb_hth_resource_access',
          'access arguments append' => TRUE,
          'args' => array(
            array(
              'name' => 'year',
              'type' => 'int',
              'description' => 'hth year',
              'source' => array('param' => 'year'),
              'default' => '',
              'optional' => TRUE,
            ),
            array(
              'name' => 'week',
              'type' => 'int',
              'description' => 'hth week',
              'source' => array('param' => 'week'),
              'default' => '',
              'optional' => TRUE,
            ),
            array(
              'name' => 'state',
              'type' => 'string',
              'description' => 'hth state',
              'source' => array('param' => 'state'),
              'default' => '',
              'optional' => TRUE,
            ),
            array(
              'name' => 'standing',
              'type' => 'int',
              'description' => 'hth standing',
              'source' => array('param' => 'status'),
              'default' => '',
              'optional' => TRUE,
            ),
            array(
              'name' => 'page',
              'type' => 'int',
              'description' => 'page number',
              'source' => array('param' => 'page'),
              'default' => '1',
              'optional' => TRUE,
            ),
            array(
              'name' => 'ipp',
              'type' => 'int',
              'description' => 'items per page',
              'source' => array('param' => 'ipp'),
              'default' => '5',
              'optional' => TRUE,
            ),
          ),   
        ),
      ),
    ),
  );
}

function _bb_hth_resource_access() {
  return true;
}